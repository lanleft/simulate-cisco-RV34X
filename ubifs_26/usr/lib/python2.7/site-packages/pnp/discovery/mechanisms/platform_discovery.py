################################################################################
# Copyright (c) 2015-17 by Cisco Systems, Inc.
# All rights reserved.
#
# Author: Shaurin Desai <shaurdes@cisco.com>
################################################################################
"""Platform Discovery Mechanism

This file acts provides access to the Platform Discovery API implementation
found in the pnp_platform module. If the API implementation is not found, an
exception is raised after initializing objects for any failed imports.

Note:
    This file should be the ONLY file to import from the Platform Discovery API
    implementation provided by pnp_platform.discovery.platform_discovery. Any
    pnp files making calls to the Platform Discovery API should import this file
    and redefine the imported objects, if necessary.

"""
try:
    from pnp_platform.discovery.platform_discovery import platform_discovery
except ImportError:
    def platform_discovery(_):
        """Replacement for pnp_platform API call. Performs no-op operation."""
        pass
    platform_discovery.__name__ = 'Platform Discovery Mechanism (N/A)'
    from pnp.discovery.infra.errors import DiscoveryAPIError
    raise DiscoveryAPIError("Failed to import Platform Discovery API "
                            "implementation")
